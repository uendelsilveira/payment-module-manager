#includes:
   # - ./vendor/larastan/larastan/extension.neon
   # - ./vendor/nesbot/carbon/extension.neon
parameters:
    ignoreErrors:
        - '#Call to method PHPUnit\\Framework\\Assert::assertTrue\(\) with true will always evaluate to true#'
        - '#Cannot call method (instance|forgetInstance|expectsOutput)\(\) on#'
        - '#Call to an undefined method Mockery#'
        - '#Access to an undefined property (Illuminate\\Database\\Eloquent\\Collection|Illuminate\\Database\\Eloquent\\Model)#'
        - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Collection.*::delete\(\)#'

        # Mockery dynamic methods in tests (ignore all Mockery errors)
        -
            path: tests/
            message: '#Cannot call method .* on mixed#'

        # Test-specific offset access on mixed (API responses, JSON decode)
        -
            path: tests/
            message: '#Cannot access offset .* on mixed#'
        -
            path: tests/
            message: '#Cannot access property .* on mixed#'

        # PHPUnit assertions with mixed
        -
            path: tests/
            message: '#assertArrayHasKey.*expects#'

        # Config::set() in tests
        -
            path: tests/TestCase.php
            message: '#Cannot call method set\(\) on mixed#'

        # HTTP Response methods (Laravel middleware returns mixed)
        -
            path: src/Http/Middleware/EnsureIdempotency.php
            message: '#Cannot call method#'

        # JSON decode results - function parameter type
        -
            path: src/Http/Controllers/MercadoPagoWebhookController.php
            message: '#(json_decode expects|does not accept array<mixed>)#'

        # Array merge with API responses
        - '#array_merge expects array, mixed given#'

        # Property access on stdClass/object from APIs
        -
            path: src/Gateways/
            message: '#Cannot access property .* on mixed#'

        # Cannot cast mixed
        - '#Cannot cast mixed to string#'

        # Mixed parameters in Support/LogContext
        -
            path: src/Support/
            message: '#Parameter .* expects .*, mixed given#'

        # Mixed parameters in Gateways
        -
            path: src/Gateways/
            message: '#Parameter .* expects .*, mixed given#'

        # Mixed parameters in Middlewares
        -
            path: src/Http/Middleware/
            message: '#(Cannot access offset|Binary operation|Parameter .* expects)#'

        # Mixed in Repositories
        -
            path: src/Repositories/
            message: '#(Cannot cast|should return .* but returns mixed)#'

        # Mixed in Providers
        -
            path: src/Providers/
            message: '#Cannot call method .* on mixed#'

        # Mixed in MercadoPagoClient
        -
            path: src/Services/MercadoPagoClient.php
            message: '#(Cannot access property|should return .* but returns mixed|Binary operation)#'

        # Mixed in Listeners
        -
            path: src/Listeners/
            message: '#(Parameter .* expects|Cannot access offset|subject of function str_replace)#'

        # Mixed in Jobs
        -
            path: src/Jobs/
            message: '#Cannot access offset#'

        # Mixed in Http/Requests validation callbacks
        -
            path: src/Http/Requests/
            message: '#(Trying to invoke mixed|Parameter .* expects)#'

        # CurrencyService array types from config
        -
            path: src/Services/CurrencyService.php
            message: '#should return .* but returns (array<mixed, mixed>|array<mixed>|mixed)#'

        # MonetaryLimitsValidator array access
        -
            path: src/Services/MonetaryLimitsValidator.php
            message: '#(Cannot access offset|should return .* but returns array<mixed, mixed>)#'

        # MercadoPagoClient API responses
        -
            path: src/Services/MercadoPagoClient.php
            message: '#(does not accept mixed|should return .* but returns array<mixed>)#'

        # RateLimitPaymentRequests
        -
            path: src/Http/Middleware/RateLimitPaymentRequests.php
            message: '#(Cannot access constant class|Cannot call method getAuthIdentifier|should return int but returns mixed)#'

        # PaymentServiceProvider container resolution
        -
            path: src/Providers/PaymentServiceProvider.php
            message: '#expects .*, mixed given#'

        # LogContext dynamic data handling
        -
            path: src/Support/LogContext.php
            message: '#(Cannot access (property|offset)|expects array<string, mixed>, array<mixed, mixed> given)#'

    paths:
        - src
        - tests
    level: 10
    bootstrapFiles:
        - tests/TestCase.php
